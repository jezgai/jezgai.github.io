<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<script src="javascript/VE_EspecieBase.js"></script>
<script src="javascript/VE_comun.js"></script>
<script src="javascript/VE_razas.js"></script>
<script src="javascript/VE_atributos.js"></script>
<script src="javascript/VE_habilidades.js"></script>
<script src="javascript/VE_ClaseBase.js"></script>
<script src="javascript/VE_clases.js"></script>
<script src="javascript/VE_trasfondos.js"></script>
<script src="javascript/VE_pjBase.js"></script>
<script src="javascript/VE_pj.js"></script>
<script src="javascript/VEP_clases.js"></script>
<script src="javascript/VEP_pj.js"></script>
<script src="javascript/VESO_clases.js"></script>
<script src="javascript/VESO_pj.js"></script>
<script src="javascript/VEJ_clases.js"></script>
<script src="javascript/VEJ_pj.js"></script>
<script src="javascript/VEZ_clases.js"></script>
<script src="javascript/VEZ_pj.js"></script>
<script src="javascript/VECP_clases.js"></script>
<script src="javascript/VECP_pj.js"></script>
<script src="javascript/NUV_clases.js"></script>
<script src="javascript/NUV_pj.js"></script>
<script src="javascript/VC_esencias.js"></script>
<script src="javascript/VC_mascaras.js"></script>
<script src="javascript/VC_pj.js"></script>
<script src="javascript/VES_equipo.js"></script>
<script src="javascript/VES_bioformas.js"></script>
<script src="javascript/VES_clases.js"></script>
<script src="javascript/VES_pj.js"></script>
<script src="javascript/VPP_trasfondos.js"></script>
<script src="javascript/VPP_rama.js"></script>
<script src="javascript/VPP_clase.js"></script>
<script src="javascript/VPP_pj.js"></script>
<script src="javascript/VEA_origenes.js"></script>
<script src="javascript/VEA_clases.js"></script>
<script src="javascript/VEA_pj.js"></script>
<script src="javascript/VM_clases.js"></script>
<script src="javascript/VM_pj.js"></script>
<script src="javascript/VED_razas.js"></script>
<script src="javascript/VED_clases.js"></script>
<script src="javascript/VED_pj.js"></script>
<script src="javascript/VESL_razas.js"></script>
<script src="javascript/VESL_clases.js"></script>
<script src="javascript/VESL_pj.js"></script>
<script src="javascript/VECO_clases.js"></script>
<script src="javascript/VECO_pj.js"></script>

<script src="javascript/pdfform.minipdf.dist.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.0.0/FileSaver.min.js"></script>

<script>

	let pj = new Object();
	let dinero = "";
	
	let recalculahabilidades = false;
	

	function abajoatr(atributo) {
		
		var atributosiguiente = pj.atributos[(parseInt(atributo)+1)%6];
		pj.atributos[(parseInt(atributo)+1)%6] = pj.atributos[atributo];
		pj.atributos[atributo] = atributosiguiente;
		var satrs = Comun.tablaAtributos();
		document.getElementById("atributos").innerHTML = satrs;
		
		pj.calculaRasgosDerivados(atributo);
		
		/*if ( atributo <= 1 ) {
			pj.calculaDefensa();
		}
		if ( atributo == 1 || atributo == 2 ) {
			pj.calculaPV();
		}
		if ( recalculahabilidades && (atributo == 2 || atributo == 3) && pj.modifAtributo(pj.atributos[atributo]) != pj.modifAtributo(pj.atributos[(parseInt(atributo)+1)%6]) ) {
			pj.calculaHabilidades();*/
			document.getElementById("habilidades").innerHTML = Comun.tablaHabilidades();
		//}
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos();
	}
	
	function abajoatrcero(ipj, atributo) {
		
		var modCONantes = Atributos.modif(pj.pjs[ipj].atributos[2]);
		var atributosiguiente = pj.pjs[ipj].atributos[(parseInt(atributo)+1)%6];
		pj.pjs[ipj].atributos[(parseInt(atributo)+1)%6] = pj.pjs[ipj].atributos[atributo];
		pj.pjs[ipj].atributos[atributo] = atributosiguiente;
		var modCONdespues = Atributos.modif(pj.pjs[ipj].atributos[2]);
		
		pj.pjs[ipj].pv += (modCONdespues - modCONantes);
		pj.pjs[ipj].defensa = 10 + Atributos.modif(pj.pjs[ipj].atributos[1]);
		pintapj0();
		
	}
	
	function abajohab(habilidad) {
		
		var habilidadsiguiente = pj.habilidades[(parseInt(habilidad)+1)%6];
		pj.habilidades[(parseInt(habilidad)+1)%6] = pj.habilidades[habilidad];
		pj.habilidades[habilidad] = habilidadsiguiente;
		var shabs = Comun.tablaHabilidades();
		document.getElementById("habilidades").innerHTML = shabs;
	}	
	
	
	function rellenaPDFExpandido() {
		var xhr = new XMLHttpRequest();
		var contenido;
		
		xhr.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				
			  contenido = this.response;
			  
			  var fields = pj.rellenaCamposPDFExpandido();
			  
			  var out_buf = pdfform().transform(contenido, fields);
			  var blob = new Blob([out_buf], {type: 'application/pdf'});
			  saveAs(blob, pj.nombre + ".pdf");
			}
		};


		xhr.open('GET', pj.plantillaPDFExpandido, true);
		xhr.responseType = 'arraybuffer';
		xhr.setRequestHeader("Content-Type", "application/json");
		xhr.send();		
		
	}
	
	function rellenaPDF() {
		var xhr = new XMLHttpRequest();
		var contenido;
		
		xhr.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				
			  contenido = this.response;
			  
			  var fields = pj.rellenaCamposPDF();
			  
			  var out_buf = pdfform().transform(contenido, fields);
			  var blob = new Blob([out_buf], {type: 'application/pdf'});
			  saveAs(blob, pj.nombre + ".pdf");
			}
		};


		xhr.open('GET', pj.plantillaPDF, true);
		xhr.responseType = 'arraybuffer';
		xhr.setRequestHeader("Content-Type", "application/json");
		xhr.send();		
		
	}
	
	
	function rellenaPDFCero() {
		var xhr = new XMLHttpRequest();
		var contenido;
		
		xhr.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				
			  contenido = this.response;
			  
			  var fields = PJ.rellenaCamposPDFCero();
			  
			  var out_buf = pdfform().transform(contenido, fields);
			  var blob = new Blob([out_buf], {type: 'application/pdf'});
			  saveAs(blob, "PJs Embudo.pdf");
			}
		};


		xhr.open('GET', "pdf/VEEmbudo.pdf", true);
		xhr.responseType = 'arraybuffer';
		xhr.setRequestHeader("Content-Type", "application/json");
		xhr.send();		
		
	}
	
	
	function limpia() {
		
		//document.getElementById("sclases").innerHTML = "";
		//document.getElementById("snivel").innerHTML = "";
		//document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenerapdf").innerHTML = "";
		//document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").style.visibility="hidden";
	}
	
	function seleccionaraza(thelist) {
		limpia();
		var idx = thelist.selectedIndex;
		var seleccionado = thelist.options[idx].innerHTML;
		if ( idx < 1 ) {
			seleccionado = 'random';
		}
		nombreraza = seleccionado;
	}
	function seleccionaclase(thelist) {
		limpia();
		var idx = thelist.selectedIndex;
		var seleccionado = thelist.options[idx].innerHTML;
		if ( idx < 1 ) {
			seleccionado = 'random';
		}
		nombreclase = seleccionado;
	}
	
	function seleccionanivel(thelist) {
		limpia();
		var idx = thelist.selectedIndex;
		numeronivel = thelist.options[idx].innerHTML;
	}
	
	function seleccionanivelconcero(thelist) {
		limpia();
		var idx = thelist.selectedIndex;
		numeronivel = thelist.options[idx].innerHTML;
		if ( numeronivel == 0 ) {
			document.getElementById("sclases").style.visibility="hidden";
			document.getElementById("srazas").style.visibility="hidden";
			generapj0();
		}
		else {
			document.getElementById("sclases").style.visibility="visible";
			document.getElementById("srazas").style.visibility="visible";
		}
	}
	
	function pintapj0() {
		var spj = PJ.tablaPJCero(0) + "<br/>" + PJ.tablaPJCero(1);
		document.getElementById("atributos").innerHTML = spj;
		spj = PJ.tablaPJCero(2) + "<br/>" + PJ.tablaPJCero(3);
		document.getElementById("habilidades").innerHTML = spj;
				
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDFCero()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";
	}
	
	function generapj0() {
		
		vacia();
		pj = PJ.creapersonajenivelcero();
		
		pintapj0();
	}
	
	let nombreraza = "random";
	let nombreclase = "random";
	let numeronivel = 1;
	let parametrosimg = "";
	let paginaimg = "";
	
	
	function cargadesplegableVC() {
		recalculahabilidades = false;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";
		
		var srazas = esencias.desplegableEsencias("seleccionaraza");
		var sclases = mascaras.desplegableMascaras("seleccionaclase");
		var snivel = Comun.desplegableNivel(10, "seleccionanivel", "genera");
		var sboton = Comun.botonGenera("generaVC");
		//document.getElementById("desplegables").innerHTML = srazas + sclases + snivel;	
		
		document.getElementById("srazas").innerHTML = srazas;
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("snivel").innerHTML = snivel;
		document.getElementById("bgenera").innerHTML = sboton;
		document.getElementById("srazas").style.visibility="visible";
		
	}	
	
	function cargadesplegable() {
		recalculahabilidades = false;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";
		
		var srazas = Comun.desplegableRazas(razas, "seleccionaraza");
		var sclases = Comun.desplegableClases(clases, "seleccionaclase");
		var snivel = Comun.desplegableNivel(14, "seleccionanivelconcero", "genera", 0);
		var sboton = Comun.botonGenera("genera");
		//document.getElementById("desplegables").innerHTML = srazas + sclases + snivel;	
		
		document.getElementById("srazas").innerHTML = srazas;
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("snivel").innerHTML = snivel;
		document.getElementById("bgenera").innerHTML = sboton;
		document.getElementById("srazas").style.visibility="visible";
		
	}	
	
	function cargadesplegableVES() {
		recalculahabilidades = true;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";
		
		var srazas = Comun.desplegableRazas(bioformas, "seleccionaraza", "Bioforma");
		var sclases = Comun.desplegableClases(clasesVES, "seleccionaclase");
		var snivel = Comun.desplegableNivel(10, "seleccionanivel", "genera");
		var sboton = Comun.botonGenera("generaVES");
		//document.getElementById("desplegables").innerHTML = srazas + sclases + snivel;	
		
		document.getElementById("srazas").innerHTML = srazas;
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("snivel").innerHTML = snivel;
		document.getElementById("bgenera").innerHTML = sboton;
		document.getElementById("srazas").style.visibility="visible";
		
	}	
	function cargadesplegableP() {
		recalculahabilidades = false;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";

		/*var srazas="<strong>Raza:</strong> <select name='raza' onChange='seleccionaraza(this)'><option>--Aleatorio--</option>"
		//var srazas="<form action=''><table border='0'><tr><td><select name='rz' onchange='seleccionaraza(this.form)'><option selected value='-1'>--Aleatorio--</option>";
		for (iraza=0; iraza< razas.razas.length; iraza++) {
			//srazas += "<option value='" + iraza + "'>" + razas.razas[iraza].nombre + "</option>";
			srazas += "<option>" + razas.razas[iraza].nombre + "</option>";
		}
		srazas += "</select>";*/
		
		/*
		var sclases="<strong>Clase:</strong> <select class='w3-select'  name='clase' onchange='seleccionaclase(this)'><option>--Aleatorio--</option>";
		//var sclases="<select name='cl' onchange='seleccionaclase(this.form)'><option selected value='-1'>--Aleatorio--</option>";
		for (iclase=0; iclase< clasesP.clases.length; iclase++) {
			//sclases += "<option value='" + iclase + "'>" + clases.clases[iclase].nombre + "</option>";
			sclases += "<option>" + clasesP.clases[iclase].nombre + "</option>";
		}
		sclases += "</select>";
		//var snivel="<select name='ni' onchange='seleccionanivel(this.form)'><option selected value='1'>1</option>";
		var snivel=" <strong>Nivel:</strong> <select class='w3-select'  name='nivel' onchange='seleccionanivel(this)'><option>1</option>";
		for (inivel=2; inivel< 6; inivel++) {
			//snivel += "<option value='" + inivel + "'>" + inivel + "</option>";
			snivel += "<option>" + inivel + "</option>";
		}
		//snivel += "</select></td></tr></table></form>";
		snivel += "</select> <button class='w3-button w3-block w3-teal' onclick='generaP()'>Genera</button>";
		*/
		
		var sclases = Comun.desplegableClases(clasesP, "seleccionaclase");
		var snivel = Comun.desplegableNivel(5, "seleccionanivel", "generaP");
		var sboton = Comun.botonGenera("generaP");
		
		//document.getElementById("desplegables").innerHTML = sclases + snivel;	
		
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("snivel").innerHTML = snivel;
		document.getElementById("bgenera").innerHTML = sboton;
	}	
	
	function cargadesplegableVPP() {
		recalculahabilidades = false;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";

		
		var sclases = Comun.desplegableClases(clasesVPP, "seleccionaclase");
		var snivel = Comun.desplegableNivel(5, "seleccionanivel", "generaVPP");
		var sboton = Comun.botonGenera("generaVPP");
		
		//document.getElementById("desplegables").innerHTML = sclases + snivel;	
		
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("snivel").innerHTML = snivel;
		document.getElementById("bgenera").innerHTML = sboton;
	}	
	
	
	function cargadesplegableVEA() {
		recalculahabilidades = false;
		
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";

		
		var sclases = Comun.desplegableClases(clasesArr, "seleccionaclase");
		var srazas = origenes.desplegableOrigenes("seleccionaraza");
		var snivel = Comun.desplegableNivel(10, "seleccionanivel", "generaVEA");
		var sboton = Comun.botonGenera("generaVEA");
		
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("srazas").innerHTML = srazas;
		document.getElementById("snivel").innerHTML = snivel;
		document.getElementById("bgenera").innerHTML = sboton;
		document.getElementById("srazas").style.visibility="visible";
	}	
	
	
	function cargadesplegableSO() {
		recalculahabilidades = false;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";
		document.getElementById("snivel").style.visibility="visible";

		/*
		var sclases="<strong>Clase:</strong> <select class='w3-select' name='clase' onchange='seleccionaclase(this)'><option>--Aleatorio--</option>";
		for (iclase=0; iclase< clasesSO.clases.length; iclase++) {
			sclases += "<option>" + clasesSO.clases[iclase].nombre + "</option>";
		}
		sclases += "</select>";
		//var snivel="<select name='ni' onchange='seleccionanivel(this.form)'><option selected value='1'>1</option>";
		var snivel=" <strong>Nivel:</strong> <select class='w3-select'  name='nivel' onchange='seleccionanivel(this)'><option>1</option>";
		for (inivel=2; inivel< 11; inivel++) {
			//snivel += "<option value='" + inivel + "'>" + inivel + "</option>";
			snivel += "<option>" + inivel + "</option>";
		}
		//snivel += "</select></td></tr></table></form>";
		snivel += "</select> <button class='w3-button w3-block w3-teal' onclick='generaSO()'>Genera</button>";
		*/
		
		var sclases = Comun.desplegableClases(clasesSO, "seleccionaclase");
		var snivel = Comun.desplegableNivel(10, "seleccionanivel", "generaSO");
		var sboton = Comun.botonGenera("generaSO");
		
		
		//document.getElementById("desplegables").innerHTML = sclases + snivel;	
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("snivel").innerHTML = snivel;
		document.getElementById("bgenera").innerHTML = sboton;
	}	
	
	
	function cargadesplegableJ() {
		recalculahabilidades = false;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";
		document.getElementById("snivel").style.visibility="visible";

		var sclases = Comun.desplegableClases(clasesJ, "seleccionaclase");
		var snivel = Comun.desplegableNivel(10, "seleccionanivel", "generaJ");
		var sboton = Comun.botonGenera("generaJ");
		
		
		//document.getElementById("desplegables").innerHTML = sclases + snivel;	
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("snivel").innerHTML = snivel;
		document.getElementById("bgenera").innerHTML = sboton;
	}	
	
	function cargadesplegableZ() {
		recalculahabilidades = false;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";
		document.getElementById("snivel").style.visibility="visible";

		var sclases = Comun.desplegableClases(clasesZ, "seleccionaclase");
		var snivel = Comun.desplegableNivel(5, "seleccionanivel", "generaZ");
		var sboton = Comun.botonGenera("generaZ");
		
		
		//document.getElementById("desplegables").innerHTML = sclases + snivel;	
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("snivel").innerHTML = snivel;
		document.getElementById("bgenera").innerHTML = sboton;
	}	
	
	function cargadesplegableCP() {
		recalculahabilidades = false;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";
		document.getElementById("snivel").style.visibility="visible";

		var sclases = Comun.desplegableClases(clasesCP, "seleccionaclase");
		var snivel = Comun.desplegableNivel(10, "seleccionanivel", "generaCP");
		var sboton = Comun.botonGenera("generaCP");
		
		
		//document.getElementById("desplegables").innerHTML = sclases + snivel;	
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("snivel").innerHTML = snivel;
		document.getElementById("bgenera").innerHTML = sboton;
	}	
	
	function cargadesplegableNUV() {
		recalculahabilidades = false;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("snivel").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";

		var sclases = Comun.desplegableClases(clasesNUV, "seleccionaclase");
		var sboton = Comun.botonGenera("generaNUV");
		
		
		//document.getElementById("desplegables").innerHTML = sclases + snivel;	
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("bgenera").innerHTML = sboton;
	}	
	
	
	function cargadesplegableVM() {
		recalculahabilidades = false;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";
		
		var sclases = Comun.desplegableClases(clasesVM, "seleccionaclase");
		var snivel = Comun.desplegableNivel(10, "seleccionanivel", "generaVM");
		var sboton = Comun.botonGenera("generaVM");
		
		//document.getElementById("desplegables").innerHTML = sclases + snivel;	
		
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("snivel").innerHTML = snivel;
		document.getElementById("bgenera").innerHTML = sboton;
	}	
	
	function cargadesplegableVDj() {
		recalculahabilidades = false;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";
		
		var srazas = Comun.desplegableRazas(razasDj, "seleccionaraza");
		var sclases = Comun.desplegableClases(clasesDj, "seleccionaclase");
		var snivel = Comun.desplegableNivel(14, "seleccionanivel", "generaVDj");
		var sboton = Comun.botonGenera("generaVDj");
		//document.getElementById("desplegables").innerHTML = srazas + sclases + snivel;	
		
		document.getElementById("srazas").innerHTML = srazas;
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("snivel").innerHTML = snivel;
		document.getElementById("bgenera").innerHTML = sboton;
		document.getElementById("srazas").style.visibility="visible";
		
	}	
	
	function cargadesplegableVSL() {
		recalculahabilidades = false;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";
		
		var srazas = Comun.desplegableRazas(razasSL, "seleccionaraza");
		var sclases = Comun.desplegableClases(clasesSL, "seleccionaclase");
		var snivel = Comun.desplegableNivel(14, "seleccionanivel", "generaVSL");
		var sboton = Comun.botonGenera("generaVSL");
		//document.getElementById("desplegables").innerHTML = srazas + sclases + snivel;	
		
		document.getElementById("srazas").innerHTML = srazas;
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("snivel").innerHTML = snivel;
		document.getElementById("bgenera").innerHTML = sboton;
		document.getElementById("srazas").style.visibility="visible";
		
	}
	
	
	function cargadesplegableCO() {
		recalculahabilidades = false;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("bgenerapdf").style.visibility="hidden";
		document.getElementById("snivel").style.visibility="visible";

		var sclases = Comun.desplegableClases(clasesCO, "seleccionaclase");
		var snivel = Comun.desplegableNivel(10, "seleccionanivel", "generaCO");
		var sboton = Comun.botonGenera("generaCO");
		
		
		//document.getElementById("desplegables").innerHTML = sclases + snivel;	
		document.getElementById("sclases").innerHTML = sclases;
		document.getElementById("snivel").innerHTML = snivel;
		document.getElementById("bgenera").innerHTML = sboton;
	}	
	
	function vacia() {
		parametrosimg = "";
		paginaimg = "";
		document.getElementById("datos").innerHTML = "";
		document.getElementById("rasgos").innerHTML = "";
		document.getElementById("atributos").innerHTML = "";
		document.getElementById("talentos").innerHTML = "";
		document.getElementById("habilidades").innerHTML = "";
		document.getElementById("dinero").innerHTML = "";
		document.getElementById("ficha").innerHTML = "";
		
		document.getElementById("poderes").innerHTML = "";
		document.getElementById("dpoderes").innerHTML = "";		
		document.getElementById("poderes").style.visibility="hidden";
		document.getElementById("dpoderes").style.visibility="hidden";
		
		
		/*document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";*/
	}
	
	function generaCP() {
		vacia();
				
		pj = new PJCP(numeronivel);
		pj.clase = nombreclase;
		
		pj.genera();
		
		var satrs = Comun.tablaAtributos();

		var shabs = Comun.tablaHabilidades();
		
		var stals = Comun.tablaTalentos();
		
		document.getElementById("dtalentos").innerHTML = "";
		document.getElementById("dtalentos").style.visibility="hidden";
		
		document.getElementById("datos").innerHTML = "<table  class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Clase:</strong> " + pj.clase + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Nivel:</strong> " + numeronivel + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos(); 
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = stals;
		document.getElementById("habilidades").innerHTML = shabs;
		document.getElementById("dinero").innerHTML = "<br/><strong>Dinero: </strong>" + pj.din + "<br/>" + pj.equipo();
		
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";
	}	
	
	
	function generaZ() {
		vacia();
				
		pj = new PJZ(numeronivel);
		pj.clase = nombreclase;
		
		pj.genera();	
		
		var satrs = Comun.tablaAtributos();

		var shabs = Comun.tablaHabilidades();
		
		var stals = Comun.tablaTalentos();
		
		
		document.getElementById("dtalentos").innerHTML = "";
		document.getElementById("dtalentos").style.visibility="hidden";
		
		document.getElementById("datos").innerHTML = "<table  class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Clase:</strong> " + pj.clase + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Nivel:</strong> " + numeronivel + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = "<table  class='w3-table  w3-striped w3-border'><tr><td><strong>DA:</strong> d" + pj.daguante +
													  " </td></tr><tr><td><strong>Atq:</strong> " + pj.atq +
													  " </td></tr><tr><td><strong>Ins:</strong> " + pj.ins + 
													  " </td></tr><tr><td><strong>Def:</strong> " + pj.defn + 
													  " </td></tr><tr><td><strong>PS:</strong> " + pj.pS + 
													  " </td></tr><tr><td><strong>PV:</strong> " + pj.pv + "</td></tr></table";
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = stals;
		document.getElementById("habilidades").innerHTML = shabs;
		document.getElementById("dinero").innerHTML = "";
		
		
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";

	}	
	
	
	function generaSO() {
		vacia();
				
		pj = new PJSO(numeronivel);
		pj.clase = nombreclase;
		
		pj.genera();		
		
		var satrs = Comun.tablaAtributos();

		var shabs = Comun.tablaHabilidades();
		
		var stals = Comun.tablaTalentos();
		
		
		document.getElementById("dtalentos").innerHTML = "";
		document.getElementById("dtalentos").style.visibility="hidden";
		
		document.getElementById("datos").innerHTML = "<table  class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Clase:</strong> " + pj.clase + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Nivel:</strong> " + numeronivel + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos();
		
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = stals;
		document.getElementById("habilidades").innerHTML = shabs;
		document.getElementById("dinero").innerHTML = "<br/><strong>Nivel adquisitivo: </strong> " + pj.niveladq;
		
				
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";

	}	
	
	function generaFicha() {
		if ( paginaimg != "" && parametrosimg != "" ) {
			if ( document.getElementById('FotoPJ').value != "" ) {
				parametrosimg += "&foto="+document.getElementById('FotoPJ').value;
			}
			window.open("https://jezgai.github.io/" + paginaimg + parametrosimg, "_blank");
		}
	}
	
	function generaJ() {
		vacia();
				
		pj = new PJJ(numeronivel);
		pj.clase = nombreclase;
		
		pj.genera();
		
		var satrs = Comun.tablaAtributos();

		var shabs = Comun.tablaHabilidades();
		
		var stals = Comun.tablaTalentos();
		
		document.getElementById("dtalentos").innerHTML = "";
		document.getElementById("dtalentos").style.visibility="hidden";
		
		document.getElementById("datos").innerHTML = "<table  class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Clase:</strong> " + pj.clase + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Nivel:</strong> " + numeronivel + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos(); 
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = stals;
		document.getElementById("habilidades").innerHTML = shabs;
		document.getElementById("dinero").innerHTML = "<br/><strong>Poder adquisitivo: </strong> " + pj.din;
		
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";

	}	
	
	
	function generaP() {
		vacia();
				
		pj = new PJP(numeronivel);
		pj.clase = nombreclase;
		
		pj.genera();
		
		
		var satrs = Comun.tablaAtributos();

		var shabs = Comun.tablaHabilidades();
		
		var stals = Comun.tablaTalentos();
		//var stals = pj.tablaTalentos();
				
		document.getElementById("datos").innerHTML = "<table class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Clase:</strong> " + pj.clase + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Nivel:</strong> " + numeronivel + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos();
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = stals;
		document.getElementById("habilidades").innerHTML = shabs;
		//dinero = Comun.random(8,1) * 100;
		dinero = pj.din;
		document.getElementById("dinero").innerHTML = "<br/><strong>Dinero: </strong> " + dinero + "$";
		
		document.getElementById("dtalentos").innerHTML = pj.tablaTalentos();
		document.getElementById("dtalentos").style.visibility="visible";
		
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";
	}	
	
	
	function generaVM() {
		vacia();
				
		pj = new PJVM(numeronivel);
		pj.clase = nombreclase;
		
		pj.genera();
		
		
		var satrs = Comun.tablaAtributos();

		var shabs = Comun.tablaHabilidades();
		
		var stals = Comun.tablaTalentos("Poderes");
		//var stals = pj.tablaTalentos();
				
		document.getElementById("datos").innerHTML = "<table class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Clase:</strong> " + pj.clase + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Nivel:</strong> " + numeronivel + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos();
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = stals;
		document.getElementById("habilidades").innerHTML = shabs;
		//dinero = Comun.random(8,1) * 100;
		/*dinero = pj.din;
		document.getElementById("dinero").innerHTML = "<br/><strong>Dinero: </strong> " + dinero + "$";
		
		document.getElementById("dtalentos").innerHTML = pj.tablaTalentos();
		document.getElementById("dtalentos").style.visibility="visible";*/
		
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";
	}	
	
	
	function generaVEA() {
		vacia();
				
		pj = new PJAr(numeronivel);
		pj._origen = nombreraza;
		pj.clase = nombreclase;
		
		pj.genera();
		
		var satrs = Comun.tablaAtributos();

		var shabs = Comun.tablaHabilidades();
		
		//var stals = Comun.tablaTalentos();
		//var stals = pj.tablaTalentos();
				
		document.getElementById("datos").innerHTML = "<table class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Clase:</strong> " + pj.clase + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Nivel:</strong> " + numeronivel + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos();
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = pj.tablaTalentos();
		document.getElementById("habilidades").innerHTML = shabs;
		//dinero = Comun.random(8,1) * 100;
		dinero = pj.din;
		
		//document.getElementById("dtalentos").innerHTML = pj.tablaTalentos();
		document.getElementById("dinero").innerHTML = pj.tablaDebilidades() + pj.tablaEquipo();
		pj.muestraSupersticiones();
		
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";
	}
	
	function genera() {
		if ( numeronivel == 0 ) {
			generapj0();
			return;
		}
		vacia();
		
		pj = new PJ(numeronivel);
		pj.raza = nombreraza;
		pj.clase = nombreclase;
		
		pj.genera();
		
		dinero = pj.din; // Comun.random(6,1) * 100;
		
		
		var satrs = Comun.tablaAtributos();
		
		var shabs = Comun.tablaHabilidades();
		
		var stals = Comun.tablaTalentos();

		document.getElementById("dtalentos").innerHTML = "";
		document.getElementById("dtalentos").style.visibility="hidden";
		
		document.getElementById("datos").innerHTML = "<table  class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Raza:</strong> " + pj.raza + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Clase:</strong> " + pj.clase + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Nivel:</strong> " + numeronivel + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos(); 
													  
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = stals;
		document.getElementById("habilidades").innerHTML = shabs;
		document.getElementById("dinero").innerHTML = "<br/><strong>Trasfondo y Dinero: </strong> <br/>" + pj.trasfondo + "<br/>" + dinero + " mo";
    
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>" +
														  "<button class='w3-button w3-block w3-teal' onclick='rellenaPDFExpandido()'>PDF Expandido</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";
	}
	
	
	function generaNUV() {
		vacia();
				
		pj = new PJNUV();
		pj.clase = nombreclase;
		
		pj.genera();
		
		
		var satrs = Comun.tablaAtributos();

		var shabs = Comun.tablaHabilidades();
		
		var stals = pj.tablaTalentos();
				
		document.getElementById("datos").innerHTML = "<table class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Clase:</strong> " + pj.clase + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos();
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = stals;
		document.getElementById("habilidades").innerHTML = shabs;

		document.getElementById("dinero").innerHTML = pj._objClase.equipo + "<br/>" + pj._din + " duros.";
		
		
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";
	}
	
	
	function generaVC() {
		vacia();
		
		pj = new PJC(numeronivel);
		pj.esencia = nombreraza;
		pj.mascara = nombreclase;
		
		pj.genera();
		
		dinero = pj.din; // Comun.random(6,1) * 100;
		
		
		var satrs = Comun.tablaAtributos();
		
		var shabs = Comun.tablaHabilidades();
		
		var stals = pj.tablaTalentos();

		document.getElementById("dtalentos").innerHTML = "";
		document.getElementById("dtalentos").style.visibility="hidden";
		
		document.getElementById("datos").innerHTML = "<table  class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Esencia:</strong> " + pj.esencia + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Máscara:</strong> " + pj.mascara + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Nivel:</strong> " + numeronivel + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos(); 
													  
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = stals;
		document.getElementById("habilidades").innerHTML = shabs;
		document.getElementById("dinero").innerHTML = "<strong>Dinero: </strong> " + dinero + "$";
    
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";
	}
	
	
	function generaVES() {
		vacia();
		
		pj = new PJVES(numeronivel);
		pj.raza = nombreraza;
		pj.clase = nombreclase;
		
		pj.genera();
		
		dinero = pj.din; // Comun.random(6,1) * 100;
		
		
		var satrs = Comun.tablaAtributos();
		
		var shabs = Comun.tablaHabilidades();
		
		var stals = Comun.tablaTalentos();

		document.getElementById("dtalentos").innerHTML = "";
		document.getElementById("dtalentos").style.visibility="hidden";
		
		document.getElementById("datos").innerHTML = "<table  class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Bioforma:</strong> " + pj.raza + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Clase:</strong> " + pj.clase + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Nivel:</strong> " + numeronivel + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos(); 
													  
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = stals;
		document.getElementById("habilidades").innerHTML = shabs;
		var sdinero = "<strong>Dinero: </strong> <br/>" + dinero + " créditos";
		if ( pj._paquete != null ) {
			sdinero+="<br/>" + pj._paquete.componentes[0];
			var indiceequipo=1;
			for (indiceequipo = 1; indiceequipo < pj._paquete.componentes.length; indiceequipo++) {
				sdinero += ", " + pj._paquete.componentes[indiceequipo];
			}
		}
		if ( pj._armas != null ) {
			sdinero += "<br/><strong>Armas</strong><br/>";
			var indice=0;
			for (indice = 0; indice<pj._armas.length; indice++) {
				sdinero += pj._armas[indice].nombre + " (" + pj._armas[indice].dano + ")<br/>";
			}
		}
		document.getElementById("dinero").innerHTML = sdinero; // "<br/><strong>Dinero: </strong> <br/>" + dinero + " créditos";
	
		document.getElementById("dtalentos").style.visibility="visible";
		document.getElementById("dtalentos").innerHTML = pj.descripcionTalentos();
	
		document.getElementById("poderes").style.visibility="visible";
		document.getElementById("poderes").innerHTML = pj.tablaPoderes();
		document.getElementById("dpoderes").style.visibility="visible";
		document.getElementById("dpoderes").innerHTML = pj.descripcionPoderes();
		
    
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";
	}
	
	function generaVPP() {
		vacia();
				
		pj = new PJPP(numeronivel);
		pj.clase = nombreclase;
		
		pj.genera();
		
		
		var satrs = Comun.tablaAtributos();

		var shabs = Comun.tablaHabilidades();
		
		var stals = pj.tablaTalentos();
		//var stals = pj.tablaTalentos();
				
		document.getElementById("datos").innerHTML = "<table class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Clase:</strong> " + pj.clase + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Nivel:</strong> " + numeronivel + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos();
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = stals;
		document.getElementById("habilidades").innerHTML = shabs;
		//dinero = Comun.random(8,1) * 100;
		dinero = pj.din;
		//document.getElementById("dinero").innerHTML = "<br/><strong>Dinero: </strong> " + dinero + "$";
		
		//document.getElementById("dtalentos").innerHTML = pj.tablaTalentos();
		//document.getElementById("dtalentos").style.visibility="visible";
		
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";
	}	
	
	
	
	function generaVDj() {
		if ( numeronivel == 0 ) {
			generapj0();
			return;
		}
		vacia();
		
		pj = new PJDj(numeronivel);
		pj.raza = nombreraza;
		pj.clase = nombreclase;
		
		pj.genera();
		
		dinero = pj.din; // Comun.random(6,1) * 100;
		
		
		var satrs = Comun.tablaAtributos();
		
		var shabs = Comun.tablaHabilidades();
		
		var stals = Comun.tablaTalentos();

		document.getElementById("dtalentos").innerHTML = "";
		document.getElementById("dtalentos").style.visibility="hidden";
		
		document.getElementById("datos").innerHTML = "<table  class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Raza:</strong> " + pj.raza + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Clase:</strong> " + pj.clase + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Nivel:</strong> " + numeronivel + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos(); 
													  
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = stals;
		document.getElementById("habilidades").innerHTML = shabs;
		document.getElementById("dinero").innerHTML = "<br/><strong>Trasfondo y Dinero: </strong> <br/>" + pj.trasfondo + "<br/>" + dinero + " mo";
    
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";
	}
	
	
	function generaVSL() {
		if ( numeronivel == 0 ) {
			generapj0();
			return;
		}
		vacia();
		
		pj = new PJSL(numeronivel);
		pj.raza = nombreraza;
		pj.clase = nombreclase;
		
		pj.genera();
		
		dinero = pj.din; // Comun.random(6,1) * 100;
		
		
		var satrs = Comun.tablaAtributos();
		
		var shabs = Comun.tablaHabilidades();
		
		var stals = Comun.tablaTalentos();

		document.getElementById("dtalentos").innerHTML = "";
		document.getElementById("dtalentos").style.visibility="hidden";
		
		document.getElementById("datos").innerHTML = "<table  class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Raza:</strong> " + pj.raza + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Clase:</strong> " + pj.clase + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Nivel:</strong> " + numeronivel + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos(); 
													  
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = stals;
		document.getElementById("habilidades").innerHTML = shabs;
		document.getElementById("dinero").innerHTML = "<br/><strong>Trasfondo y Dinero: </strong> <br/>" + pj.trasfondo + "<br/>" + dinero + " mo";
    
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";
	}
	
	function generaCO() {
		vacia();
				
		pj = new PJCO(numeronivel);
		pj.clase = nombreclase;
		
		pj.genera();
		
		var satrs = Comun.tablaAtributos();

		var shabs = Comun.tablaHabilidades();
		
		var stals = Comun.tablaTalentos();
		
		document.getElementById("dtalentos").innerHTML = "";
		document.getElementById("dtalentos").style.visibility="hidden";
		
		document.getElementById("datos").innerHTML = "<table  class='w3-table'><tr><td style='padding-left: 15px;padding-right: 25px;'><strong>Nombre:</strong> " + pj.nombre + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Clase:</strong> " + pj.clase + " </td><td style='padding-left: 15px;padding-right: 25px;'><strong>Nivel:</strong> " + numeronivel + " </td></tr></table>";
		document.getElementById("rasgos").innerHTML = pj.tablaRasgos(); 
		document.getElementById("atributos").innerHTML = satrs;
		document.getElementById("talentos").innerHTML = stals;
		document.getElementById("habilidades").innerHTML = shabs;
		document.getElementById("dinero").innerHTML = "<br/><strong>Dinero: </strong>" + pj.din + "<br/>" + pj.equipo();
		
		document.getElementById("bgenerapdf").innerHTML = "<button class='w3-button w3-block w3-teal' onclick='rellenaPDF()'>Genera PDF</button>";
		document.getElementById("bgenerapdf").style.visibility="visible";
	}	
	
	function seleccionajdr(thelist) {
		vacia();
		var idx = thelist.selectedIndex;
		//var content = thelist.options[idx].innerHTML;
		//document.getElementById("desplegables").innerHTML = "";
		document.getElementById("sclases").innerHTML = "";
		document.getElementById("snivel").innerHTML = "";
		document.getElementById("srazas").innerHTML = "";
		document.getElementById("bgenera").innerHTML = "";
		document.getElementById("bgenerapdf").innerHTML = "";
		document.getElementById("srazas").style.visibility="hidden";
		document.getElementById("bgenerapdf").style.visibility="hidden";
		document.getElementById("dtalentos").innerHTML = "";
		document.getElementById("dtalentos").style.visibility="hidden";
		document.getElementById("poderes").style.visibility="hidden";
		document.getElementById("dpoderes").style.visibility="hidden";
		document.getElementById("relleno").style.visibility="hidden";
		if ( idx == 1 ) {
			cargadesplegable();
		}
		else if ( idx == 2 ) {
			cargadesplegableP();
		}
		else if ( idx == 3 ) {
			//document.getElementById("desplegables").innerHTML = "-- En desarrollo --";
			cargadesplegableCP();
		}
		else if ( idx == 4 ) {
			cargadesplegableSO();
		}
		else if ( idx == 5 ) {
			cargadesplegableNUV();
		}
		else if ( idx == 6 ) {
			cargadesplegableVES();
		}
		else if ( idx == 7 ) {
			cargadesplegableVEA();
		}
		else if ( idx == 8 ) {
			cargadesplegableVPP();
		}
		else if ( idx == 9 ) {
			cargadesplegableZ();
		}
		else if ( idx == 10 ) {
			cargadesplegableVC();
		}
		else if ( idx == 11 ) {
			cargadesplegableJ();
		}
		else if ( idx == 12 ) {
			cargadesplegableVM();
		}
		else if ( idx == 13 ) {
			cargadesplegableVDj();
		}
		else if ( idx == 14 ) {
			cargadesplegableVSL();
		}
		else if ( idx == 15 ) {
			cargadesplegableCO();
		}
	}
	
</script>
  <style>
			
	* {
	  box-sizing: border-box;
	}
	.micro {
		float:left;
		width:1%;
	}
	.minileft {
	  float:left;
	  width:16%;
	  padding:0 1px;
	}
	.mitad {
	  float:left;
	  width:50%;
	  padding:0 1px;
	}
	.tercio {
	  float:left;
	  width:33%;
	  padding:0 1px;
	}
	.dostercios {
	  float:left;
	  width:66%;
	  padding:0 1px;
	}
	.right {
	  float:left;
	  width:33%;
	  padding:0 1px;
	}
	.total {
	  float:left;
	  width:100%;
	  padding:0 1px;
	}



	@media only screen and (max-width:820px) {
	  /* For mobile phones: */
	  .mitad, .micro, .tercio, .dostercios, .right, .total, .minileft {
		width:100%;
	  }
  </style>
</head>
<body >
	<div class="w3-container w3-teal">
	  <h2>Generador de personajes para Vieja Escuela</h2>
	</div>
	
	<div style="overflow:auto">
		<div class="total">
			<select class="w3-select"  name="jdr" onChange="seleccionajdr(this)">
				<option>--Selecciona--</option>
				<option>Vieja Escuela: Jdr</option>
				<option>Vieja Escuela: Pulp</option>
				<option>Vieja Escuela: Cyberpunk</option>
				<option>Vieja Escuela: Salvaje Oeste</option>
				<option>Nuestro Ultimo Verano</option>
				<option>Vieja Estrella</option>
				<option>Vieja Escuela: Arrr!</option>
				<option>Vieja Escuela: Peplum</option>
				<option>Vieja Escuela: Zombies</option>
				<option>Vieja Ciudad</option>
				<option>Vieja Escuela: Japon</option>
				<option>Vieja Máscara</option>
				<option>Viejo Djinn</option>
				<option>Viejo Sol</option>
				<option>Cosmophobia</option>
			</select>
		</div>
		
	</div>
	
	<div style="overflow:auto">
		<div class="minileft" id="srazas"></div>
		<div class="tercio" id="sclases"></div>
		<div class="minileft" id="snivel"></div>
		<div class="minileft" id="bgenera"></div>
		<div class="minileft" id="bgenerapdf"></div>
	</div>
	<div class="w3-container w3-large">	
	<hr/>
	<div id="ficha"></div>
	
	<div style="overflow:auto">
		<div class="total" id="datos"></div>
	</div>
	<div style="overflow:auto">
		<div class="tercio" id="atributos"></div>
		<div class="tercio" id="habilidades"></div>
		<div class="tercio" id="rasgos"></div>
	</div>
	<div style="overflow:auto">
		<div class="dostercios" id="talentos"></div>
		<div class="tercio" id="dinero"></div>
	</div>
	<div style="overflow:auto">
		<div class="dostercios" id="poderes"></div>
		<div class="tercio" id="relleno"></div>
	</div>
	<div style="overflow:auto">
		<div class="mitad" id="dtalentos"></div>
		<div class="mitad" id="dpoderes"></div>
	</div>
		
	<!--<div class="w3-row">
		<div class="w3-col s9 w3-center" id="datos"></div>
	</div>
	<div class="w3-row">
		<div class="w3-col s9 w3-center" id="atributos"></div>
	</div>
	<div class="w3-row">
		<div class="w3-col s6 w3-center" id="habilidades"></div>
		<div class="w3-col s3 w3-center" id="rasgos"></div>
	</div>
	<div class="w3-row">
		<div  class="w3-col s6 w3-center" id="talentos"></div>
		<div class="w3-col s3 w3-center" id="dinero"></div>
	</div>-->
	</div>
</body>
</html>
